---
lab:
    title: '랩 2 - 데이터 마이그레이션에 적합한 도구 선택'
    module: '모듈 2: 데이터 마이그레이션에 적합한 도구 선택'
---

# DP-050 - Azure로 SQL 워크로드 마이그레이션
# 랩 2 - 데이터 마이그레이션에 적합한 도구 선택

**예상 소요 시간**: 45분

**필수 구성 요소**: 이 랩을 수행하기 위한 필수 단계는 없습니다.

**랩 파일**: 이 랩용 랩 파일은 없습니다.

## 랩 개요

학생들은 규정된 데이터 플랫폼 현대화 단계에서 두 가지 도구를 사용하여 자동화된 방식으로 환경 검색을 수행합니다. 또한 마이그레이션 전에 호환성 문제를 파악하고, 온-프레미스 서버 마이그레이션을 수행하기 전에 문제를 해결하는 방법을 제시하는 계획을 정의합니다. 마지막으로 Azure SQL Database의 대상 버전에서 워크로드의 성능을 평가합니다.

## 랩 목표
  
이 랩을 완료하면 다음 작업을 수행할 수 있습니다.

1. MAP Toolkit를 사용하여 데이터 자산 인벤토리 작성
2. Data Migration Assistant를 사용하여 마이그레이션 가능한 데이터 파악

## 시나리오
  
여러분은 데이터 현대화 프로젝트를 준비 중인 AdventureWorks의 선임 데이터 엔지니어입니다. 먼저 도구를 사용하여 환경 내의 SQL 서버 인벤토리 작성을 수행합니다. 그런 다음 서버 평가를 수행하여 향후 진행할 현대화 작업 전에 해결해야 하는 문제를 파악합니다. 온-프레미스 SQL 서버 중 하나는 기업의 판매 처리에 사용됩니다. 마이그레이션 대상 서비스에서도 해당 워크로드를 처리할 수 있어야 합니다.

## 연습 1: MAP Toolkit를 사용하여 데이터 자산 인벤토리 작성

이 랩에서는 Microsoft Assessment and Planning Toolkit를 사용하여 SQL Server 2008 R2와 함께 온-프레미스 서버에서 실행되는 SQL Server 인스턴스 관련 정보를 수집합니다.

예상 소요 시간: 25분

이 연습의 주요 태스크는 다음과 같습니다.

1. Microsoft Assessment and Planning Toolkit 설치
1. MAPS 인벤토리 데이터베이스 만들기
1. 원격 관리를 사용하도록 설정
1. 인벤토리 데이터 수집
1. MAPS에서 Microsoft SQL Server 검색 정보 확인
1. SQL Server 보고서 만들기

### 태스크 1: Microsoft Assessment and Planning Toolkit 설치

1. 웹 브라우저를 열고 [Microsoft Assessment and Planning Toolkit 다운로드 사이트](https://www.microsoft.com/ko-kr/download/details.aspx?id=7826)로 이동합니다.
1. **다운로드** 를 클릭하고 로컬 폴더에 파일을 저장합니다.
1. 다운로드가 완료되면 해당 폴더로 이동하여 **MapSetup.exe** 를 두 번 클릭합니다.
1. 설치 마법사를 시작합니다 Microsoft Assessment and Planning Toolkit에서 **다음** 을 클릭합니다.
1. 사용권 계약 화면에서 **동의함** 옆의 확인란을 클릭하고 **다음** 을 클릭합니다.
1. 설치 폴더 화면에서 **다음** 을 클릭합니다.
1. 설치 시작 화면에서 **설치** 를 클릭합니다.
1. Microsoft Assessment and Planning Toolkit 설치 마법사 완료에서 **마침** 을 클릭합니다.

### 태스크 2: MAPS 인벤토리 데이터베이스 만들기

1. Windows 바탕 화면에서 **시작** 을 클릭하고 Microsoft Assessment를 입력한 다음 **Microsoft Assessment and Planning Toolkit** 를 클릭합니다.
1. **예** 를 클릭하여 이 애플리케이션 실행을 위한 UAC(사용자 계정 컨트롤) 대화 상자의 내용에 동의합니다.
1. 데이터베이스 만들기 또는 선택 대화 상자에서 **인벤토리 데이터베이스 만들기** 를 클릭하고 새 데이터베이스 이름으로 **MapsInventory** 를 입력한 후에 **확인** 을 클릭합니다.

### 태스크 3: 원격 관리를 사용하도록 설정

1. **시작** 에서 **cmd** 를 입력하여 **명령 프롬프트** 로 이동한 다음 **명령 프롬프트** 를 마우스 오른쪽 단추로 클릭하고 **관리자 권한으로 실행** 을 선택합니다.
1. 다음 명령을 입력하고 **Enter** 키를 누릅니다.
**netsh advfirewall set currentprofile settings remotemanagement enable**

### 태스크 4: 인벤토리 데이터 수집

1. MAP Toolkit를 아직 열지 않은 경우 시작합니다. 애플리케이션 크기를 전체 화면으로 조정할 수 있습니다.
1. **예** 를 클릭하여 이 애플리케이션 실행을 위한 UAC(사용자 계정 컨트롤) 대화 상자의 내용에 동의합니다.
1. **시작 위치** 섹션에서 **인벤토리 수행** 을 클릭하여 인벤토리 마법사를 시작합니다.
1. **인벤토리 시나리오** 페이지에서 **SQL Server** 확인란이 선택되어 있는지 확인하고 **다음** 을 클릭합니다.
1. 검색 방법 페이지에서 **AD DS(Active Directory Domain Services) 사용** 의 선택을 취소합니다.
1. **컴퓨터 이름과 자격 증명 수동 입력**을 선택하고 **다음**을 클릭합니다.
1. 모든 컴퓨터 자격 증명 페이지에서 **만들기** 를 클릭합니다.
1. 계정 입력 대화 상자의 계정 이름 필드에 로컬 컴퓨터 사용자의 **사용자 이름**(예: Administrator)을 입력합니다.
1. **암호** 및 **암호 확인** 필드에 로컬 컴퓨터 사용자의 암호(예: password)를 입력한 다음 **저장** 을 클릭합니다.
1. 모든 컴퓨터 자격 증명 페이지에서 **다음** 을 클릭합니다.
1. 자격 증명 순서 페이지에서 **다음** 을 클릭합니다. 
1. 수동으로 컴퓨터 입력 페이지에서 **만들기** 를 클릭합니다.
1. 컴퓨터 및 자격 증명 지정 페이지에서 컴퓨터 이름으로 로컬 컴퓨터의 이름(예: MAP-HOL)을 입력하고 **추가** 를 클릭합니다.
1. **모든 컴퓨터 자격 증명 목록 사용** 을 선택하고 **저장** 을 클릭합니다.
1. **다음** 을 클릭하고 요약 페이지에 표시되는 정보를 검토합니다.
1. **마침** 을 클릭하여 상태 대화 상자와 인벤토리 프로세스를 시작합니다.
참고: 가상 머신에서 MAP를 사용하는 경우에는 머신 하나의 인벤토리만 수행하도록 지정했더라도 MAP Toolkit는 해당 머신이 가상 머신임을 검색하여 VM 호스트의 인벤토리 수행도 시도합니다. 이 경우 지정한 자격 증명을 사용하여 해당 인벤토리를 수행하지 못할 수도 있습니다.
1. 인벤토리가 완료되면 상태 대화 상자에서 **닫기** 를 클릭합니다.

### 태스크 5: MAPS에서 Microsoft SQL Server 검색 정보 확인

1.  **MAPS** 의 주 메뉴에서 **파일** → **데이터베이스 만들기/선택...** 을 선택하여 **사용할 데이터베이스 만들기 또는 선택** 대화 상자를 시작합니다.
1.  **기존 데이터베이스 사용** 을 클릭하고 데이터베이스 메뉴에서 **MapsInventory** 를 선택한 후에 **확인** 을 클릭합니다.
1.  UI의 왼쪽 창에서 **데이터베이스 시나리오** 그룹을 클릭한 다음 **SQL Server 검색** 타일을 클릭합니다.
1.  시나리오 세부 정보 페이지에서 SQL Server 정보가 포함된 원형 차트를 살펴봅니다.  

### 태스크 6: SQL Server 보고서 만들기

1. SQL Server 검색 화면의 옵션 섹션에서 시나리오 세부 정보 페이지 상단의 **SQL Server Database 세부 정보 보고서 생성** 을 클릭하여 보고서 생성을 시작하고 상태 대화 상자를 시작합니다.
1. 상태 대화 상자에서 생성 완료가 보고되고 나면 대화 상자를 닫을 때 보고서 폴더 열기가 선택되어 있는지 확인하고 **닫기** 를 클릭합니다.
1. **SQLServerDatabaseDetails-<날짜/시간>** Excel 문서를 엽니다.
1. SQLServerAssessment Excel 보고서에서 **SQLServerSummary** 탭을 표시하여 네트워크에서 발견된 SQL Server 데이터베이스 구성 요소의 총 수를 확인합니다. 스프레드시트를 닫습니다.
1. SQL Server 검색 화면의 옵션 섹션에서 시나리오 세부 정보 페이지 상단의 **SQL Server 평가 보고서 생성** 을 클릭하여 보고서 생성을 시작하고 상태 대화 상자를 시작합니다.
1. 상태 대화 상자에서 생성 완료가 보고되고 나면 대화 상자를 닫을 때 보고서 폴더 열기가 선택되어 있는지 확인하고 **닫기**를 클릭합니다.
1. **SQLServerDatabaseAssessment-<날짜/시간>** Excel 문서를 엽니다.
1. 데이터베이스 인스턴스 탭을 표시하여 나열된 모든 데이터베이스 인스턴스 및 서버 세부 정보(서버 가상화 여부와 머신 유형 포함)를 확인합니다.
1. 구성 요소 탭을 표시하여 설치된 모든 데이터베이스 구성 요소와 서버 세부 정보를 확인합니다.
1. 세부 정보를 확인한 후 보고서와 파일 브라우저를 닫습니다.

> **결과**: Microsoft Assessment and Planning Toolkit를 실행하여 SQL Server 인스턴스 관련 정보를 수집해 이 연습을 완료해야 합니다.

## 연습 2: Data Migration Assistant를 사용하여 마이그레이션 가능한 데이터 파악
  
이 연습에서는 Data Migration Assistant를 사용하여 SQL Server와 Azure SQL Database 간의 SQL Server 기능 패리티 및 호환성 문제를 확인합니다.

예상 소요 시간: 20분
  
이 연습의 주요 태스크는 다음과 같습니다.

1. Windows에서 DMA(Data Migration Assistant)를 설치하는 방법
1. Data Migration Assistant 사용

### 태스크 1: Windows에서 DMA(Data Migration Assistant) 설치

> **참고**: Data Migration Assistant가 이미 설치되어 있으면 이 태스크를 건너뛸 수 있습니다.

1. [https://www.microsoft.com/ko-kr/download/details.aspx?id=53595](https://www.microsoft.com/ko-kr/download/details.aspx?id=53595)로 이동합니다.
1. 필수 시스템 요구 사항을 확인하여 환경이 소프트웨어를 지원하는지 확인합니다.
1. **DataMigrationAssistant.msi** 를 다운로드하고 **설치** 를 클릭합니다.

    1. 설치 관리자 **DataMigrationAssistant.msi** 를 두 번 클릭합니다.
    2. 시작 화면에서 **다음** 을 클릭합니다.
    3. 사용자 사용권 계약의 내용을 확인하고 적절한 경우 동의한 후에 **다음** 을 클릭합니다.
    4. 개인정보처리방침의 내용을 확인하고 **설치** 를 클릭합니다.
    5. 해당 메시지가 표시되면 이 애플리케이션에 대해 UAC 제어를 허용합니다. **마침** 을 클릭하여 설치를 완료합니다.

### 태스크 2: Data Migration Assistant 사용

1. "Microsoft Data Migration Assistant" 애플리케이션을 엽니다.

    1. **+** 를 선택하면 새 프로젝트 대화 상자가 열립니다. 이 대화 상자에 다음 정보를 입력합니다.

        1. 프로젝트 유형: **평가**
        2. 프로젝트 이름: **마이그레이션 평가 SQL DB**
        3. 원본 서버 유형: **SQL Server**
        4. 대상 서버 유형: **Azure SQL Database**
        5. **만들기** 를 클릭합니다.
        6. **다음** 을 클릭합니다.
        7.  **서버에 연결** 대화 상자에 **localhost** 의 **서버 이름** 을 입력합니다.
        8. **연결** 을 클릭합니다.
        9. 평가하려는 모든 데이터베이스를 클릭하여 **추가** 합니다.
        10. **평가 시작** 을 클릭합니다.

1. 확인된 SQL Server 기능 패리티 및 호환성 문제를 검토합니다. 기능 패리티 문제의 수를 적어 둡니다.

1. Data Migration Assistant를 닫습니다. Azure SQL Database Managed Instance를 사용하여 Microsoft Data Migration Assistant를 재생합니다.

    1. **+** 를 선택하면 새 프로젝트 대화 상자가 열립니다. 이 대화 상자에 다음 정보를 입력합니다.
        
        1. 프로젝트 유형: **평가**
        2. 프로젝트 이름: **마이그레이션 평가 SQL DB MI**
        3. 원본 서버 유형: **SQL Server**
        4. 대상 서버 유형: **Azure SQL Database Managed Instance**
        5. **만들기** 를 클릭합니다.
        6. **다음** 을 클릭합니다.
        7. **서버에 연결** 대화 상자에 **localhost** 의 **서버 이름** 을 입력합니다.
        8. **연결** 을 클릭합니다.
        9. 평가하려는 모든 데이터베이스를 클릭하여 **추가** 합니다.
        10. **평가 시작** 을 클릭합니다.

1. 확인된 SQL Server 기능 패리티 및 호환성 문제를 검토합니다. 기능 패리티 문제의 수를 적어 둡니다.

1. Data Migration Assistant를 닫습니다. Azure Virtual Machines의 SQL Server를 사용하여 Microsoft Data Migration Assistant를 재생합니다.

    1. **+** 를 선택하면 새 프로젝트 대화 상자가 열립니다. 이 대화 상자에 다음 정보를 입력합니다.
    
        1. 프로젝트 유형: **평가**
        2. 프로젝트 이름: **마이그레이션 평가 Azure VM**
        3. 원본 서버 유형: **SQL Server**
        4. 대상 서버 유형: **Azure SQL Database Managed Instance**
        5. **만들기** 를 클릭합니다.
        6. **다음** 을 클릭합니다.
        7. **서버 이름** 으로 **localhost를 입력합니다.**
        8. **연결** 을 클릭합니다.
        9. 평가하려는 모든 데이터베이스를 클릭하여 **추가** 합니다.
        10. **평가 시작** 을 클릭합니다.

1. 확인된 SQL Server 기능 패리티 및 호환성 문제를 검토합니다. 기능 패리티 문제의 수를 적어 둡니다.

> **결과**: Azure SQL Database와 SQL Server 인스턴스 간의 호환성 문제와 SQL Server 기능 패리티 관련 정보를 수집하여 이 연습을 완료해야 합니다.

## 랩 복습

45분 정도가 지나면 강사가 이 랩을 종료합니다. 그러면 전체 수강생들이 각 그룹에서 확인한 사항을 발표합니다.

