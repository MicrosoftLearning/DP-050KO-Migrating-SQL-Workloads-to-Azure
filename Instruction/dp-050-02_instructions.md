# DP 050 - Azure로 SQL 워크로드 마이그레이션

# 랩 2 - 데이터 마이그레이션에 적합한 도구 선택

**예상 소요 시간**: 25분

**전제 조건**: 이 랩을 수행하기 위한 필수 단계는 없습니다.

**랩 파일**: 이 랩용 랩 파일은 없습니다.

## 랩 개요

학생들은 규정된 데이터 플랫폼 현대화 단계에서 Data Migration Assistant를 사용하여 자동화된 방식으로 환경을 조사합니다. 그리고 마이그레이션 전 호환성 문제를 파악하며, 온-프레미스 서버 마이그레이션을 수행하기 전에 문제를 해결하는 방법 관련 계획을 정의합니다. 마지막으로 Azure SQL Database의 대상 버전에서 워크로드의 성능을 평가합니다.

## 랩 목표
  
이 랩을 완료하면 다음과 같은 작업을 수행할 수 있습니다.

1. Data Migration Assistant를 사용하여 마이그레이션 가능한 데이터 파악

## 시나리오
  
여러분은 데이터 현대화 프로젝트를 준비 중인 AdventureWorks의 선임 데이터 엔지니어입니다. 먼저 도구를 사용하여 환경 내의 SQL Server 인벤토리를 수행합니다. 그런 다음 서버 평가를 수행하여 향후 진행할 현대화 작업 전에 해결해야 하는 문제를 파악합니다. 온-프레미스 SQL 서버 중 하나는 기업의 판매 처리에 사용됩니다. 워크로드 마이그레이션 후에는 새 Azure 서비스에서도 해당 워크로드를 지원할 수 있어야 합니다.

## 연습 1: Data Migration Assistant를 사용하여 마이그레이션 가능한 데이터 파악
  
이 연습에서는 Data Migration Assistant를 사용하여 SQL Server와 Azure SQL Database 간의 SQL Server 기능 패리티 및 호환성 문제를 확인합니다.

예상 소요 시간: 20분
  
이 연습의 주요 작업은 다음과 같습니다.

1. Windows에서 DMA(Data Migration Assistant) 설치
1. Data Migration Assistant 사용

### Windows에서 DMA(Data Migration Assistant) 설치

> [!참고]
> DMA가 이미 설치되어 있더라도 최신 버전 도구를 사용할 수 있도록 이 작업의 단계를 수행하세요.

1. 수업용으로 실행 중인 **LON-DEV-01** 가상 머신에 로그인합니다. 사용자 이름은 **administrator**이고 암호는 **Pa55w.rd**입니다.
1. 웹 브라우저를 열고 Microsoft Data Migration Assistant 다운로드 페이지 +++https://www.microsoft.com/download/details.aspx?id=53595+++로 이동합니다.
1. 요구 사항 목록을 확인하여 환경이 소프트웨어를 지원하는지 확인합니다.
1. **DataMigrationAssistant.msi**를 다운로드하려면 **다운로드**, **실행**을 차례로 선택합니다.
1. **시작** 화면에서 **다음**을 선택합니다.
1. **동의함**, **다음**을 차례로 선택합니다.
1. **개인정보처리방침**의 내용을 확인하고 **설치**를 선택합니다.
1. 해당 메시지가 표시되면 이 애플리케이션에 대해 UAC 제어를 허용합니다.
1. **마침**을 선택하여 설치를 완료합니다.

### Data Migration Assistant를 사용하여 SQL Server에서 Azure SQL Database로의 마이그레이션 준비

1. **시작** 단추를 선택하고 **데이터 마이그레이션**을 입력한 다음 **Microsoft Data Migration Assistant**를 선택합니다.
1. 새 프로젝트를 만들려면 왼쪽의 **+** 를 선택합니다.
1. **새로 만들기** 페이지에서 다음 값을 입력한 후에 **만들기**를 선택합니다.

    | 속성 | 값 |
    | --- | --- |
    | 프로젝트 형식 | 평가 |
    | 프로젝트 이름 | +++Migration Assessment SQL DB+++ |
    | 평가 유형 | 데이터베이스 엔진 |
    | 원본 서버 유형 | SQL Server |
    | 대상 서버 유형 | Azure SQL Database |

1. **옵션** 페이지에서 기본 설정을 그대로 적용하고 **다음**을 선택합니다.
1. **서버에 연결** 페이지에서 다음 값을 입력한 후에 **연결**을 선택합니다.

    | 속성 | 값 |
    | --- | --- |
    | 서버 이름 | localhost를 입력합니다. |
    | 인증 유형 | Windows 인증 |
    | 연결 암호화 | 선택 취소 |
    | 서버 인증서 신뢰 | 선택 |

1. **원본 추가** 페이지에서 **AdventureWorks** 데이터베이스를 선택하고 **추가**를 선택합니다.
1. **원본 선택** 페이지에서 **평가 시작**을 선택합니다.
1. 확인된 SQL Server 기능 패리티 및 호환성 문제를 검토합니다. 기능 패리티 문제의 수를 확인합니다.

### Data Migration Assistant를 사용하여 SQL Server에서 Azure SQL Database Managed Instance로의 마이그레이션 준비

1. 새 프로젝트를 만들려면 왼쪽의 **+** 를 선택합니다.
1. **새로 만들기** 페이지에서 다음 값을 입력한 후에 **만들기**를 선택합니다.

    | 속성 | 값 |
    | --- | --- |
    | 프로젝트 형식 | 평가 |
    | 프로젝트 이름 | +++Migration Assessment SQL DB MI+++ |
    | 평가 유형 | 데이터베이스 엔진 |
    | 원본 서버 유형 | SQL Server |
    | 대상 서버 유형 | Azure SQL Database Managed Instance |

1. 옵션 페이지에서 기본 설정을 그대로 적용하고 다음을 선택합니다.
1. **서버에 연결** 페이지에서 다음 값을 입력한 후에 **연결**을 선택합니다.

    | 속성 | 값 |
    | --- | --- |
    | 서버 이름 | localhost를 입력합니다. |
    | 인증 유형 | Windows 인증 |
    | 연결 암호화 | 선택 취소 |
    | 서버 인증서 신뢰 | 선택 |

1. 원본 추가 페이지에서 AdventureWorks 데이터베이스를 선택하고 추가를 선택합니다.
1. **원본 선택** 페이지에서 **평가 시작**을 선택합니다.
1. 확인된 SQL Server 기능 패리티 및 호환성 문제를 검토합니다. 기능 패리티 문제의 수를 확인합니다.

### Data Migration Assistant를 사용하여 SQL Server에서 Azure Virtual Machine에 설치된 SQL Server로의 마이그레이션 준비

1. 새 프로젝트를 만들려면 왼쪽의 **+** 를 선택합니다.
1. **새로 만들기** 페이지에서 다음 값을 입력한 후에 **만들기**를 선택합니다.

    | 속성 | 값 |
    | --- | --- |
    | 프로젝트 형식 | 평가 |
    | 프로젝트 이름 | +++Migration Assessment Azure VM+++ |
    | 평가 유형 | 데이터베이스 엔진 |
    | 원본 서버 유형 | SQL Server |
    | 대상 서버 유형 | Azure Virtual Machines의 SQL Server |

1. 옵션 페이지에서 기본 설정을 그대로 적용하고 다음을 선택합니다.
1. **서버에 연결** 페이지에서 다음 값을 입력한 후에 **연결**을 선택합니다.

    | 속성 | 값 |
    | --- | --- |
    | 서버 이름 | localhost를 입력합니다. |
    | 인증 유형 | Windows 인증 |
    | 연결 암호화 | 선택 취소 |
    | 서버 인증서 신뢰 | 선택 |

1. 원본 추가 페이지에서 AdventureWorks 데이터베이스를 선택하고 추가를 선택합니다.
1. **원본 선택** 페이지에서 **평가 시작**을 선택합니다.
1. 확인된 SQL Server 기능 패리티 및 호환성 문제를 검토합니다. 기능 패리티 문제의 수를 확인합니다.

이 연습에서는 온-프레미스 SQL Server 인스턴스와 Azure의 다양한 SQL Server 호스팅 옵션 간에 확인된 SQL Server 기능 패리티 및 호환성 문제 관련 정보를 수집했습니다.

## 랩 검토

20분 정도가 지나면 강사가 이 랩을 종료합니다. 그러면 전체 수강생들이 각 그룹에서 확인한 사항을 발표합니다.