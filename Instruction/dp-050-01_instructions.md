---
lab:
    title: '랩 1 - Azure 아키텍처 관련 고려 사항'
    module: '모듈 1: 데이터 플랫폼 현대화 소개'
---

# DP-050 - Azure로 SQL 워크로드 마이그레이션
# 랩 1 - Azure 아키텍처 관련 고려 사항

**예상 소요 시간**: 50분

**필수 구성 요소**: 이 랩을 수행하기 위한 필수 단계는 없습니다.

**랩 파일**: 이 랩용 파일은 _Allfiles\Labfiles\Starter\DP-150.1_ 폴더에 있습니다.

## 랩 개요

학생들은 이 모듈에서 파악한 정보를 활용하여 데이터 플랫폼 현대화, 그리고 조직에서 현대화 프로젝트를 진행해야 하는 이유/방법 관련 지식을 실제로 시연합니다. 그리고 Azure로 이동하는 비용을 결정하는 방법도 시연하며, 또한 작업 중인 환경 관련 정보도 수집합니다. 그리고 마지막으로 지정된 시나리오에 사용해야 하는 데이터 플랫폼 현대화 전략을 결정합니다.

## 랩 목표
  
이 랩을 완료하면 다음 작업을 수행할 수 있습니다.

1. 데이터 플랫폼 현대화 이해
2. 마이그레이션 단계 이해
3. 데이터 마이그레이션 기술

## 시나리오
  
여러분은 최근 AdventureWorks에 선임 데이터 엔지니어로 입사했으며, 컨설턴트 및 아키텍트와 함께 조직의 기술/업무 요구 사항을 충족하는 데이터 플랫폼 현대화 프로젝트를 시작하는 과정을 진행하고 있습니다. 이 과정에서 Azure로 마이그레이션하는 총 소유 비용 계산 방법의 예를 시연해야 합니다. 그런 다음 주니어 데이터 엔지니어에게 Azure로 마이그레이션할 SQL Server 관련 정보 수집을 요청합니다. 그 후에는 지정된 시나리오에 가장 적합한 마이그레이션 대상 Azure 데이터 플랫폼 기술을 제안해야 합니다.

이 랩을 마치면 다음 작업을 수행하는 방법을 배울 수 있습니다.

1. 데이터 플랫폼 현대화 이해
2. 마이그레이션 단계 이해
3. 데이터 마이그레이션 기술

## 연습 1: 데이터 플랫폼 현대화 이해

이 랩에서는 데이터베이스 비용을 계산하는 방법을 시연합니다.

예상 소요 시간: 15분

이 연습의 주요 태스크는 다음과 같습니다.

1. Microsoft TCO(총 소유 비용) 계산기 열기
1. 서버 기반 워크로드 정의
1. 스토리지 추가
1. 네트워킹 추가
1. 통화 조정
1. 전기 요금 조정
1. 기타 가정 사항 조정
1. 온-프레미스 비용과 Azure 비용 비교

### 태스크 1: TCO(총 소유 비용) 계산기 열기

1. 브라우저를 엽니다.
1. 워크로드 정의 섹션에서 Azure [TCO 계산기](https://azure.microsoft.com/ko-kr/pricing/tco/calculator/)로 이동하여
1. **서버** 섹션에 워크로드가 없는지 확인합니다.

### 태스크 2: 데이터베이스 워크로드 입력

1. **데이터베이스** 워크로드 섹션에서 **+ 데이터베이스 추가** 하이퍼링크를 클릭합니다.
1. 워크로드 이름을 **Accounting** 으로 지정합니다.
1. **원본** 아래에 다음 정보를 입력합니다.
   - 데이터베이스: **Microsoft SQL Server**
   - 라이선스: **엔터프라이즈**
   - 환경: **실제 서버**
   - 운영 체제: **Windows**
   - 서버: **1**
   - 서버당 프록시: **1**
   - 프로세스당 코어 **4**
   - RAM(GB) **64**
   - 최적화 기준: **CPU**
   - SQL Server 2008/2008R2: **True**
1. **대상** 아래에 다음 정보를 입력합니다.
   - 서비스: **SQL Server VM**
   - 디스크 유형: **SSD**

    > Azure의 프로덕션 서버 관련 권장 사양은 다음과 같습니다.
   - IOPS: **5000**
   - SQL Server 스토리지: **32GB**
   - SQL Server 백업: **32GB**

### 태스크 3: 스토리지 워크로드 입력

1. **스토리지** 워크로드 섹션에서 다음 정보를 입력합니다.
2. 워크로드 이름: **Accounting Local Disks**
   - 스토리지 유형 **로컬 디스크/SAN**
   - 디스크 유형: **HDD**
   - 용량: **3TB**
   - 백업: **1TB**
   - 보관: **0TB**

### 태스크 4: 네트워킹 워크로드 입력

1. **네트워킹** 워크로드 섹션에서 다음 작업을 수행합니다.
   - 아웃바운드 대역폭: **기본값을 그대로 유지** 합니다.


1. 웹 페이지 아래쪽으로 스크롤하여 **다음** 이 표시된 파란색 단추를 클릭합니다.

### 태스크 5: 통화 조정

1. **가정 사항 조정** 섹션에서 통화가 현지 통화로 설정되어 있는지 확인합니다.

### 태스크 6: Software Assurance

1. **Software Assurance 적용 범위(Azure 하이브리드 혜택 제공)** 섹션에서 다음 항목을 설정합니다.
   - Windows Server Software Assurance 적용 범위: **True**
   - SQL Server Software Assurance 적용 범위: **True**
   - 링크를 클릭하여 관련 내용을 살펴봅니다.

### 태스크 7: GRS(지역 중복 스토리지)

1. **GRS(지역 중복 스토리지)** 섹션에서 다음 항목을 설정합니다.
   - GRS는 주 지역에서 매우 멀리 떨어진 보조 지역에 데이터를 복제합니다. **기본값 유지**
   - 링크를 클릭하여 관련 내용을 살펴봅니다.

### 태스크 8: 가상 머신 비용

1. **가상 머신 비용** 섹션에서 다음 항목을 설정합니다.
   - 계산기가 B 시리즈 가상 머신추천하지 않도록 하려면 이 옵션 사용: **기본값 유지**
   - 링크를 클릭하여 관련 내용을 살펴봅니다.

### 태스크 9: 전기 요금

1. **GRS(지역 중복 스토리지)** 섹션에서 다음 항목을 설정합니다.
   - 시간당 kw 가격: **확인된 경우 실제 값 입력**

     > **참고** 2018년의 전 세계 전기 요금은 [2018년 전 세계 전기 요금](https://www.statista.com/statistics/263492/electricity-prices-in-selected-countries/)에서 확인할 수 있습니다. 이 가격은 USD($) 단위이므로 현지 통화로 변환해야합니다.

### 태스크 10: 스토리지 비용

1. **스토리지 비용** 섹션에서 다음 항목을 설정합니다.
    - 로컬 디스크/SAN-SSD의 스토리지 조달 비용/GB: **기본값 유지**
    - 로컬 디스크/SAN-HDD의 스토리지 조달 비용/GB: **기본값 유지**
    - NAS/파일 스토리지의 스토리지 조달 비용/GB: **기본값 유지**
    - Blob Storage의 스토리지 조달 비용/GB: **기본값 유지**
    - 연간 엔터프라이즈 스토리지 소프트웨어 지원 비용: **기본값 유지**
    - 테이프 드라이브당 비용: **기본값 유지**

### 태스크 11: IT 인건비

1. IT **인건비** 섹션에서 다음 항목을 설정합니다.
    - 정규직 관리자가 관리할 수 있는 실제 서버 수: **기본값 유지**
    - 정규직 관리자가 관리할 수 있는 가상 머신 수: **기본값 유지**
    - IT 관리자의 시급: **기본값 유지**

### 태스크 12: 기타 가정 사항

1. **기타 가정 사항** 섹션에서 다음 작업을 수행합니다.
   - 각 섹션을 확장하여 관련 비용을 확인합니다.

### 태스크 13: 보고서(1년)

1. **다음** 을 클릭합니다.
1. 보고서 상단의 "보고서 보기" 아래에서 기간이 기본값인 5년으로 설정되어 있는지 확인합니다.
1. 아래쪽의 보고서로 스크롤하여 온-프레미스와 Azure의 예상 비용 내역을 살펴봅니다.
1. 온-프레미스에서 비용이 가장 많이 발생하는 영역을 조사합니다.
1. 비용을 가장 많이 절약할 수 있는 영역을 조사합니다.
1. 각 섹션을 차례로 확장하여 비용 내역을 조사합니다.

### 태스크 14: 보고서(3년)

1. 페이지 맨 위로 스크롤합니다.
1. "보고서 보기" 아래에서
   - 기간이 **3년** 으로 설정되어 있는지 확인합니다.
1. 아래쪽의 보고서로 스크롤하여 온-프레미스와 Azure의 예상 비용 내역을 살펴봅니다.
1. 5년 동안의 총 지출액을 조사합니다.
1. 온-프레미스에서 비용이 가장 많이 발생하는 영역을 조사합니다.
1. 각 섹션을 차례로 확장하여 비용 내역을 조사합니다.

> **결과**: Azure TCO 계산기를 사용해 Adatum Corporation Accounting 서버 및 관련 데이터베이스의 온-프레미스 배포와 Azure 배포 간 비용 차이를 파악하여 이 연습을 완료해야 합니다.

## 연습 2: 마이그레이션 단계 이해
  
이 연습에서는 컴퓨터의 사양을 파악하기 위해 사용 중인 서버 검색을 수행합니다.

예상 소요 시간: 15분
  
이 연습의 주요 태스크는 다음과 같습니다.

1. 사용 중인 메모리 양 확인 
1. 시스템에서 사용 중인 CPU를 확인하려면 다음 단계를 수행합니다.
1. 서버의 디스크 구성 확인

### 태스크 1: 서버에서 사용 중인 메모리의 양을 확인합니다.

1. 원하는 방법을 선택해 서버에서 사용 중인 메모리의 양을 확인합니다. 

> **힌트**: 시스템 정보 도구를 사용하여 이 정보를 캡처합니다.

1. 메모장에 값을 입력해 둡니다.

### 태스크 2: 서버에서 사용 중인 CPU의 양을 확인합니다.

1. 원하는 방법을 선택해 서버에서 사용 중인 메모리의 양을 확인합니다.

1. 메모장에 값을 입력해 둡니다.

### 태스크 3: 서버에서 사용 중인 디스크 구성을 확인합니다.

1. 원하는 방법을 선택해 서버에서 사용 중인 메모리의 양을 확인합니다.

1. 메모장에 값을 입력해 둡니다.

1. 메모장 파일의 이름을 ServerSpecs.txt로 지정하여 _Allfiles\Labfiles\Starter\DP-150.1_ 폴더에 저장합니다.

> **결과**: 서버의 하드웨어 사양 관련 정보를 수집하여 이 연습을 완료해야 합니다.

## 연습 3: 데이터 마이그레이션 기술

이 연습에서는 고객이 온-프레미스 SQL Server에서 Azure로 마이그레이션하는 데 사용할 수 있는 데이터 플랫폼 기술을 선택합니다. 

예상 소요 시간: 15분 

이 연습의 주요 태스크는 다음과 같습니다.

1. 시나리오 A에서 마이그레이션을 쉽게 수행하려면 필요한 데이터베이스 기술 파악
1. 시나리오 B에서 마이그레이션을 쉽게 수행하려면 필요한 데이터베이스 기술 파악

### 태스크 1: 시나리오 A에서 마이그레이션을 쉽게 수행하려면 필요한 데이터베이스 기술 파악

1. 다음 시나리오를 살펴보세요.

    고객의 애플리케이션이 현재 온-프레미스 버전 Microsoft SQL Server 2008 내에 있는 여러 데이터베이스를 사용하고 있습니다. 따라서 총 데이터베이스 설치 공간이 크며 매년 몇 TB씩 빠르게 증가하고 있습니다. 데이터베이스가 포함되어 있는 기존 SAN 스토리지는 용량이 거의 다 찼고 확장 비용이 비싸며 곧 사용을 종료해야 할 것으로 예상됩니다. 해당 애플리케이션은 회사의 업무상 반드시 필요하고, 트랜잭션 속도는 보통 정도이며, 가동 중지 시간이 발생하면 업무상 큰 영향을 줍니다. 짧은 유지 관리 기간 동안 애플리케이션 가용성을 최대화하기 위한 변경을 수행할 수는 있습니다. 데이터베이스 증가율은 계속 높아지고 있으며, 애플리케이션이 정상적으로 실행되도록 하기 위한 DBA와 시스템 관리자의 작업 시간도 갈수록 길어지고 있습니다.

1. 이 시나리오에서는 어떤 데이터베이스 플랫폼 기술이 적절합니까?

### 태스크 2: 시나리오 B에서 마이그레이션을 쉽게 수행하려면 필요한 데이터베이스 기술 파악

1. 다음 시나리오를 살펴보세요.

    이 예제의 고객이 사용하는 SQL Server에는 부서의 요구를 충족하는 데이터베이스가 저장되어 있습니다. 이러한 데이터베이스가 호스트되는 서버인 쿼드 코어 서버(메모리 16GB)는 Access 양식과 스프레드시트의 데이터에 쉽게 액세스하기 위한 백 엔드로 사용됩니다. 데이터베이스는 총 6개이며 사용하는 전체 용량은 350MB입니다. 이 서버에 대한 최대 동시 연결 수는 12개입니다.

1. 이 시나리오에서는 어떤 데이터베이스 플랫폼 기술이 적절합니까?

> **결과**: 적절한 마이그레이션 대상 데이터베이스 기술을 파악하여 이 연습을 완료해야 합니다.

## 랩 복습

45분 정도가 지나면 강사가 이 랩을 종료합니다. 그러면 전체 수강생들이 각 그룹에서 확인한 사항을 발표합니다.

